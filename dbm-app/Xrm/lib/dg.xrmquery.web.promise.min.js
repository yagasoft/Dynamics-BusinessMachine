!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function c(t){return"function"==typeof t}function e(){var t=setTimeout;return function(){return t(n,1)}}function n(){for(var t=0;t<w;t+=2)(0,O[t])(O[t+1]),O[t]=void 0,O[t+1]=void 0;w=0}function s(t,e){var n,r=arguments,i=this,o=new this.constructor(a),s=(void 0===o[X]&&m(o),i._state);return s?(n=r[s-1],k(function(){return v(s,o,n,i._result)})):y(i,o,t,e),o}function u(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(a);return d(e,t),e}function a(){}function l(t){try{return t.then}catch(t){return D.error=t,D}}function j(t,r,i){k(function(e){var n=!1,t=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(i,r,function(t){n||(n=!0,(r!==t?d:h)(e,t))},function(t){n||(n=!0,p(e,t))},e._label);!n&&t&&(n=!0,p(e,t))},t)}function f(t,e,n){var r,i;e.constructor===t.constructor&&n===s&&e.constructor.resolve===u?(r=t,(i=e)._state===E?h(r,i._result):i._state===N?p(r,i._result):y(i,void 0,function(t){return d(r,t)},function(t){return p(r,t)})):n===D?p(t,D.error):void 0!==n&&c(n)?j(t,e,n):h(t,e)}function d(t,e){var n;t===e?p(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(n=e)||"object"==typeof n&&null!==n?f(t,e,l(e)):h(t,e)}function P(t){t._onerror&&t._onerror(t._result),g(t)}function h(t,e){t._state===T&&(t._result=e,t._state=E,0!==t._subscribers.length&&k(g,t))}function p(t,e){t._state===T&&(t._state=N,t._result=e,k(P,t))}function y(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+E]=n,i[o+N]=r,0===o&&t._state&&k(g,t)}function g(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i=void 0,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?v(n,r,i,o):i(o);t._subscribers.length=0}}function t(){this.error=null}function v(t,e,n,r){var i=c(n),o=void 0,s=void 0,u=void 0,a=void 0;if(i){if((o=function(t,e){try{return t(e)}catch(t){return U.error=t,U}}(n,r))===U?(a=!0,s=o.error,o=null):u=!0,e===o)return void p(e,new TypeError("A promises callback cannot return that same promise."))}else o=r,u=!0;e._state===T&&(i&&u?d(e,o):a?p(e,s):t===E?h(e,o):t===N&&p(e,o))}function m(t){t[X]=q++,t._state=void 0,t._result=void 0,t._subscribers=[]}function r(t,e){this._instanceConstructor=t,this.promise=new t(a),this.promise[X]||m(this.promise),b(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?h(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&h(this.promise,this._result))):p(this.promise,new Error("Array Methods must be provided an Array"))}function _(t){if(this[X]=q++,this._result=this._state=void 0,this._subscribers=[],a!==t){if("function"!=typeof t)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof _))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var e=this;try{t(function(t){d(e,t)},function(t){p(e,t)})}catch(t){p(e,t)}}}var i,o,S,b=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},w=0,x=void 0,R=void 0,k=function(t,e){O[w]=t,O[w+1]=e,2===(w+=2)&&(R?R(n):$())},A="undefined"!=typeof window?window:void 0,C=A||{},C=C.MutationObserver||C.WebKitMutationObserver,Q="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),W="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,O=new Array(1e3),$=void 0,$=Q?function(){return process.nextTick(n)}:C?(o=0,Q=new C(n),S=document.createTextNode(""),Q.observe(S,{characterData:!0}),function(){S.data=o=++o%2}):W?((i=new MessageChannel).port1.onmessage=n,function(){return i.port2.postMessage(0)}):(void 0===A&&"function"==typeof require?function(){try{var t=require("vertx");return void 0!==(x=t.runOnLoop||t.runOnContext)?function(){x(n)}:e()}catch(t){return e()}}:e)(),X=Math.random().toString(36).substring(16),T=void 0,E=1,N=2,D=new t,U=new t,q=0;return r.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===T&&n<t;n++)this._eachEntry(e[n],n)},r.prototype._eachEntry=function(e,t){var n,r,i=this._instanceConstructor,o=i.resolve;o===u?(n=l(e))===s&&e._state!==T?this._settledAt(e._state,t,e._result):"function"!=typeof n?(this._remaining--,this._result[t]=e):i===_?(f(r=new i(a),e,n),this._willSettleAt(r,t)):this._willSettleAt(new i(function(t){return t(e)}),t):this._willSettleAt(o(e),t)},r.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===T&&(this._remaining--,t===N?p(r,n):this._result[e]=n),0===this._remaining&&h(r,this._result)},r.prototype._willSettleAt=function(t,e){var n=this;y(t,void 0,function(t){return n._settledAt(E,e,t)},function(t){return n._settledAt(N,e,t)})},_.all=function(t){return new r(this,t).promise},_.race=function(i){var o=this;return new o(b(i)?function(t,e){for(var n=i.length,r=0;r<n;r++)o.resolve(i[r]).then(t,e)}:function(t,e){return e(new TypeError("You must pass an array to race."))})},_.resolve=u,_.reject=function(t){var e=new this(a);return p(e,t),e},_._setScheduler=function(t){R=t},_._setAsap=function(t){k=t},_._asap=k,_.prototype={constructor:_,then:s,catch:function(t){return this.then(null,t)}},_.polyfill=function(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=_},_.Promise=_}),ES6Promise.polyfill();var XrmQuery,Filter,XQW,__extends=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){function u(t,e,n,r,i,o,s){void 0===i&&(i=function(){}),void 0===s&&(s=!1);var u=new XMLHttpRequest;u.open(t,e,!s),u.setRequestHeader("Accept","application/json"),u.setRequestHeader("Content-Type","application/json; charset=utf-8"),u.setRequestHeader("OData-MaxVersion","4.0"),u.setRequestHeader("OData-Version","4.0"),o&&o(u),u.onreadystatechange=function(){4===this.readyState&&(u.onreadystatechange=null,200===this.status||204===this.status?r(this):i(new Error(this.response)))},u.send(n)}function s(t,e,n,r,i,o,s){u(t,(XQW.getApiUrl()+e).replace(/ /g,"%20"),n,r,i,o,s)}t.retrieve=function(t,e){return XQW.RetrieveRecord.Get(t,e)},t.retrieveMultiple=function(t){return XQW.RetrieveMultipleRecords.Get(t)},t.retrieveRelated=function(t,e,n){return XQW.RetrieveRecord.Related(t,e,n)},t.retrieveRelatedMultiple=function(t,e,n){return XQW.RetrieveMultipleRecords.Related(t,e,n)},t.create=function(t,e){return new XQW.CreateRecord(t,e)},t.update=function(t,e,n){return new XQW.UpdateRecord(t,e,n)},t.associateSingle=function(t,e,n,r,i){return new XQW.AssociateRecordSingle(t,e,n,r,i)},t.associateCollection=function(t,e,n,r,i){return new XQW.AssociateRecordCollection(t,e,n,r,i)},t.disassociateSingle=function(t,e,n){return XQW.DisassociateRecord.Single(t,e,n)},t.disassociateCollection=function(t,e,n,r){return XQW.DisassociateRecord.Collection(t,e,n,r)},t.deleteRecord=function(t,e){return new XQW.DeleteRecord(t,e)},t.setApiUrl=function(t){XQW.ApiUrl=t},t.setApiVersion=function(t){XQW.ApiUrl=XQW.getDefaultUrl(t)},t.request=u,t.sendRequest=s,t.promiseRequest=function(n,r,i,o){return XQW.promisifyCallback(function(t,e){return s(n,r,i,t,e,o)})}}(XrmQuery=XrmQuery||{}),function(t){function r(t){return null==t?"null":"string"==typeof t?"'"+s(t)+"'":t instanceof Date?s(t.toISOString()):s(t.toString())}function n(t,e,n){return r(t)+" "+e+" "+r(n)}function i(t,e,n){return t+"("+r(e)+", "+r(n)+")"}function o(t,e,n){return"("+t+" "+e+" "+n+")"}function e(t,n){var e=t.pop();return void 0===e?"":t.reduceRight(function(t,e){return o(e,n,t)},e)}function s(t){return encodeURI(t).replace(/'/g,"''").replace(/\+/g,"%2B").replace(/\//g,"%2F").replace(/\?/g,"%3F").replace(/#/g,"%23").replace(/&/g,"%26")}t.equals=function(t,e){return n(t,"eq",e)},t.notEquals=function(t,e){return n(t,"ne",e)},t.greaterThan=function(t,e){return n(t,"gt",e)},t.greaterThanOrEqual=function(t,e){return n(t,"ge",e)},t.lessThan=function(t,e){return n(t,"lt",e)},t.lessThanOrEqual=function(t,e){return n(t,"le",e)},t.and=function(t,e){return o(t,"and",e)},t.or=function(t,e){return o(t,"or",e)},t.not=function(t){return"not "+t},t.ands=function(t){return e(t,"and")},t.ors=function(t){return e(t,"or")},t.startsWith=function(t,e){return i("startswith",t,e)},t.contains=function(t,e){return i("contains",t,e)},t.endsWith=function(t,e){return i("endswith",t,e)},t.makeGuid=function(t){return XQW.makeTag(XQW.stripGUID(t))}}(Filter=Filter||{}),function(u){var t="OData.Community.Display.V1.FormattedValue",a="@"+t,e={type:"Prefer",value:'odata.include-annotations="'+t+'"'},c="@Microsoft.Dynamics.CRM.lookuplogicalname",l="@Microsoft.Dynamics.CRM.associatednavigationproperty",n={type:"Prefer",value:'odata.include-annotations="*"'},f="_bind$",d="_id$",j="_guid",h="_formatted",P="_lookuplogicalname",W="_navigationproperty",s="@odata.nextLink";function p(t,e){return t.slice(-e.length)===e}u.makeTag=function(t){return{__str:t,toString:function(){return this.__str}}};var $=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/;function q(t,e){return $.test(e)?new Date(e):(r=p(n=t,a),i=p(n,c),o=p(n,l),r?n=n.substring(0,n.length-a.length):i?n=n.substring(0,n.length-c.length):o&&(n=n.substring(0,n.length-l.length)),s="_",n.substring(0,s.length)===s&&p(n,"_value")?(n=n.substring(1,n.length-6),n+=r?h:i?P:o?W:j):r&&(n+=h),n===t?e:void(this[n]=e));var n,r,i,o,s}function y(t){return Z("{",t)&&p(t,"}")?t.substring(1,t.length-1):t}function o(t){return JSON.parse(t.response,q)}function g(t){return 0<t.length&&"string"==typeof t[0]}function r(n){if(Promise)return new Promise(function(t,e){n(t,e)});throw new Error("Promises are not natively supported in this browser. Add a polyfill to use it.")}u.stripGUID=y,u.promisifyCallback=r;function v(t){return function(e){t.forEach(function(t){return e.setRequestHeader(t.type,t.value)})}}i.prototype.followLink=function(t,e,n,r){var i=this;this.performingCallback(),XrmQuery.request("GET",t,null,function(t){t=o(t);G.followLinks(t,e,n,function(t){r(t),i.callbackReceived()},i.errorCallback)},function(t){i.callbackReceived(),i.errorCallback(t)},v(n))},i.prototype.populateRecord=function(t,e,n){this.performingCallback(),_.followLinks(t,e,n,this.callbackReceived,this.errorCallback)},i.prototype.allSent=function(){if(!this.isDoingWork)return this.successCallback(this.toReturn);this.isDoneSending=!0},i.prototype.performingCallback=function(){this.missingCallbacks++,this.isDoingWork=!0};t=i;function i(t,e,n){var r=this;this.toReturn=t,this.successCallback=e,this.errorCallback=n,this.missingCallbacks=0,this.isDoneSending=!1,this.isDoingWork=!1,this.callbackReceived=function(){r.missingCallbacks--,r.allSent&&0===r.missingCallbacks&&r.successCallback(r.toReturn)}}__extends(S,m=t),S.followLinks=function(t,e,n,r,i){return 0===e.length?r(t):new S(t,e=g(e)?e.map(function(t){return{arrKey:t,linkKey:t+s}}):e,n,r,i)};var m,_=S;function S(n,t,r,e,i){var o=m.call(this,n,e,i)||this;return t.forEach(function(e){var t=n[e.linkKey];t&&(delete n[e.linkKey],o.followLink(t,[],r,function(t){n[e.arrKey]=n[e.arrKey].concat(t)}))}),o.allSent(),o}__extends(b,F=t),b.followLinks=function(t,e,n,r,i){return t["@odata.nextLink"]||0!==t.value.length&&0!==e.length?0===e.length?new b(t,[],n,r,i):(g(e)&&(e=e.map(function(t){return{arrKey:t,linkKey:t+s}})),0===t.value.length?new b(t,e,n,r,i):(o=t.value[0],new b(t,e.filter(function(t){return o[t.linkKey]}),n,r,i))):r(t.value);var o};var F,G=b;function b(t,e,n,r,i){var o=F.call(this,t.value,r,i)||this,r=t["@odata.nextLink"];return r&&o.followLink(r,e,n,function(t){o.toReturn=o.toReturn.concat(t)}),0<e.length&&t.value.forEach(function(t){return o.populateRecord(t,e,n)}),o.allSent(),o}w.prototype.promise=function(){return r(this.execute.bind(this))},w.prototype.execute=function(t,e){this.executeRaw(t,e=void 0===e?function(){}:e,!0,!1)},w.prototype.executeSync=function(){var e=Error("Undefined behavior");return this.executeRaw(function(t){e=t},function(t){e=t},!0,!0),e},w.prototype.executeRaw=function(e,n,r,t){var i=this;void 0===n&&(n=function(){}),void 0===r&&(r=!1),void 0===t&&(t=!1);return XrmQuery.sendRequest(this.requestType,this.getQueryString(),this.getObjectToSend(),function(t){return r?i.handleResponse(t,e,n):e(t)},n,v(this.additionalHeaders),t)};t=w;function w(t){this.requestType=t,this.additionalHeaders=[],this.getObjectToSend=function(){return null}}u.Query=t;__extends(R,M=t),R.Get=function(t){return new R(E(t).toString())},R.Related=function(t,e,n){return new R(E(t).toString(),e,E(n).toString())},R.prototype.handleResponse=function(t,e,n){G.followLinks(o(t),this.expandKeys,this.additionalHeaders,e,n)},R.prototype.getFirst=function(e,t){this.top(1),this.execute(function(t){return e(t&&0<t.length?t[0]:null)},t)},R.prototype.promiseFirst=function(){return r(this.getFirst.bind(this))},R.prototype.getQueryString=function(){var t=this.entitySetName;if(this.id&&this.relatedNav&&(t+="("+this.id+")/"+this.relatedNav),this.specialQuery)return t+this.specialQuery;var e=[];return this.explicitQuery||(this.explicitQuery={}),this.addOption(e,"select",this.selects),this.addOption(e,"expand",this.expands),this.addOption(e,"filter",this.filters),this.addOption(e,"orderby",this.ordering),this.addOption(e,"skip",this.skipAmount),this.addOption(e,"top",this.topAmount),t+(0<e.length?"?"+e.join("&"):"")},R.prototype.addOption=function(t,e,n){var r=this.explicitQuery[e],e="$"+e+"=";r?t.push(e+r):null!=n&&(Array.isArray(n)?0<n.length&&t.push(e+n.join(",")):t.push(e+n))},R.prototype.select=function(t){return this.selects=N(t),this},R.prototype.selectMore=function(t){return this.selects=this.selects.concat(N(t)),this},R.prototype.explicit=function(t){return this.explicitQuery=t,this},R.prototype.expand=function(t,e){var t=E(t).toString(),n=(this.expandKeys.push(t),[]);return e&&n.push("$select="+N(e)),this.expands.push(t+(0<n.length?"("+n.join(";")+")":"")),this},R.prototype.filter=function(t){return this.filters=D(t),this},R.prototype.orFilter=function(t){return this.filters?this.filters=Filter.or(this.filters,D(t)):this.filter(t),this},R.prototype.andFilter=function(t){return this.filters?this.filters=Filter.and(this.filters,D(t)):this.filter(t),this},R.prototype.order=function(t,e){return this.ordering.push(D(t)+" "+e),this},R.prototype.orderAsc=function(t){return this.order(t,"asc")},R.prototype.orderDesc=function(t){return this.order(t,"desc")},R.prototype.skip=function(t){return this.skipAmount=t,this},R.prototype.top=function(t){return this.topAmount=t,this},R.prototype.maxPageSize=function(t){return this.additionalHeaders.push({type:"Prefer",value:"odata.maxpagesize="+t}),this},R.prototype.includeFormattedValues=function(){return this.additionalHeaders.push(e),this},R.prototype.includeFormattedValuesAndLookupProperties=function(){return this.additionalHeaders.push(n),this},R.prototype.useFetchXml=function(t){return this.specialQuery="?fetchXml="+encodeURIComponent(t),this},R.prototype.usePredefinedQuery=function(t,e){return this.specialQuery="?"+t+"="+e,this};var M,x=R;function R(t,e,n){var r=M.call(this,"GET")||this;return r.entitySetName=t,r.id=e,r.relatedNav=n,r.specialQuery=void 0,r.selects=[],r.expands=[],r.expandKeys=[],r.ordering=[],r.skipAmount=null,r.topAmount=null,r.id=void 0!==e?y(e):e,r}u.RetrieveMultipleRecords=x;__extends(k,I=t),k.Related=function(t,e,n){return new k(E(t).toString(),e,E(n).toString())},k.Get=function(t,e){return new k(E(t).toString(),e)},k.prototype.handleResponse=function(t,e,n){_.followLinks(o(t),this.expandKeys,this.additionalHeaders,e,n)},k.prototype.select=function(t){return this.selects=N(t),this},k.prototype.selectMore=function(t){return this.selects=this.selects.concat(N(t)),this},k.prototype.expand=function(t,e,n){var t=E(t).toString(),r=(this.expandKeys.push(t),[]);return e&&r.push("$select="+N(e)),n&&(n.top&&r.push("$top="+n.top),n.orderBy&&r.push("$orderby="+D(n.orderBy)+" "+(2!==n.sortOrder?"asc":"desc")),n.filter&&r.push("$filter="+D(n.filter))),this.expands.push(t+(0<r.length?"("+r.join(";")+")":"")),this},k.prototype.getQueryString=function(){var t=this.entitySetName+"("+this.id+")",e=[];return 0<this.selects.length&&e.push("$select="+this.selects.join(",")),0<this.expands.length&&e.push("$expand="+this.expands.join(",")),this.relatedNav&&(t+="/"+this.relatedNav),t+(0<e.length?"?"+e.join("&"):"")},k.prototype.includeFormattedValues=function(){return this.additionalHeaders.push(e),this},k.prototype.includeFormattedValuesAndLookupProperties=function(){return this.additionalHeaders.push(n),this};var I,x=k;function k(t,e,n){var r=I.call(this,"GET")||this;return r.entitySetName=t,r.id=e,r.relatedNav=n,r.selects=[],r.expands=[],r.expandKeys=[],r.id=y(e),r}u.RetrieveRecord=x;__extends(A,L=t),A.prototype.handleResponse=function(t,e,n){t=t.getResponseHeader("OData-EntityId");null!==t?e(t.slice(-37,-1)):n(new Error("No valid OData-EntityId found in header."))},A.prototype.setData=function(t){return this.record=t,this},A.prototype.getQueryString=function(){return this.entitySetName};var L,x=A;function A(t,e){var n=L.call(this,"POST")||this;return n.record=e,n.getObjectToSend=function(){return JSON.stringify(U(n.record))},n.entitySetName=E(t).toString(),n}u.CreateRecord=x;__extends(C,H=t),C.prototype.handleResponse=function(t,e){e()},C.prototype.setId=function(t){return this.id=y(t),this},C.prototype.getQueryString=function(){return this.entitySetName+"("+this.id+")"};var H,x=C;function C(t,e){var n=H.call(this,"DELETE")||this;return n.id=e,n.id=void 0!==e?y(e):e,n.entitySetName=E(t).toString(),n}u.DeleteRecord=x;__extends(Q,K=t),Q.prototype.handleResponse=function(t,e){e()},Q.prototype.setData=function(t,e){return this.id=y(t),this.record=e,this},Q.prototype.getQueryString=function(){return this.entitySetName+"("+this.id+")"};var K,x=Q;function Q(t,e,n){var r=K.call(this,"PATCH")||this;return r.id=e,r.record=n,r.getObjectToSend=function(){return JSON.stringify(U(r.record))},r.id=void 0!==e?y(e):e,r.entitySetName=E(t).toString(),r}u.UpdateRecord=x;__extends(O,V=t),O.prototype.handleResponse=function(t,e){e()},O.prototype.setData=function(t,e){return this.id=y(t),this.record=e,this},O.prototype.getQueryString=function(){return this.entitySetName+"("+this.id+")/"+this.relation+"/$ref"};var V,x=O;function O(t,e,n,r,i){var o=V.call(this,"PUT")||this;return o.id=e,o.getObjectToSend=function(){return JSON.stringify(U(o.record))},o.entitySetName=E(t).toString(),o.id=void 0!==e?y(e):e,o.entitySetNameTarget=E(n).toString(),o.targetId=void 0!==r?y(r):r,o.relation=E(i).toString(),o.record={},o.record["_id$"+o.entitySetNameTarget]=o.targetId,o}u.AssociateRecordSingle=x;__extends(X,z=t),X.prototype.handleResponse=function(t,e){e()},X.prototype.setData=function(t,e){return this.id=y(t),this.record=e,this},X.prototype.getQueryString=function(){return this.entitySetName+"("+this.id+")/"+this.relation+"/$ref"};var z,x=X;function X(t,e,n,r,i){var o=z.call(this,"POST")||this;return o.id=e,o.getObjectToSend=function(){return JSON.stringify(U(o.record))},o.entitySetName=E(t).toString(),o.id=void 0!==e?y(e):e,o.entitySetNameTarget=E(n).toString(),o.targetId=void 0!==r?y(r):r,o.relation=E(i).toString(),o.record={},o.record["_id$"+o.entitySetNameTarget]=o.targetId,o}u.AssociateRecordCollection=x;__extends(T,J=t),T.Single=function(t,e,n){return new T(E(t).toString(),e,E(n).toString())},T.Collection=function(t,e,n,r){return new T(E(t).toString(),e,E(n).toString(),r)},T.prototype.handleResponse=function(t,e){e()},T.prototype.setId=function(t){return this.id=y(t),this},T.prototype.getQueryString=function(){return void 0===this.targetId||null===this.targetId?this.entitySetName+"("+this.id+")/"+this.relation+"/$ref":this.entitySetName+"("+this.id+")/"+this.relation+"("+this.targetId+")/$ref"};var J,x=T;function T(t,e,n,r){var i=J.call(this,"DELETE")||this;return i.id=e,i.targetid=r,i.entitySetName=t,i.id=void 0!==e?y(e):e,i.relation=n,i.targetId=void 0!==r?y(r):r,i}function Z(t,e){return 0===e.lastIndexOf(t,0)}function E(t,e){return t(function(t,e){var n,r=function(t){var e=t.toString().match(B);if(e)return{arg:e[1],body:e[2]};throw new Error("XrmQuery: Unable to properly parse function: "+t.toString())}(t),i=function(t){return new RegExp("\\b"+t+"\\.([a-zA-Z_$][0-9a-zA-Z_$]*)(\\.([a-zA-Z_$][0-9a-zA-Z_$]*))?","g")}(r.arg),o=e||function(t){return t},s={};for(;null!==(n=i.exec(r.body));)s[n[1]]||(s[n[1]]=u.makeTag(o(n[1]))),n[3]&&(s[n[1]][n[3]]=u.makeTag(n[1]+"/"+o(n[3])));return s}(t,e))}u.DisassociateRecord=x;var B=/(?:function)*\s*\(?([a-zA-Z0-9_]+)\)?(?:\s?=>\s?\{?|\s?\{)+([\s\S]*[^\}])\}?$/m;u.ApiUrl=null;function Y(t){return function(){var t=function(){try{if(GetGlobalContext&&GetGlobalContext().getClientUrl)return GetGlobalContext().getClientUrl()}catch(t){}return}();if(void 0!==t)return t;if(void 0!==(t=function(){try{if(Xrm&&Xrm.Utility&&Xrm.Utility.getGlobalContext)return Xrm.Utility.getGlobalContext().getClientUrl()}catch(t){}try{if(window&&window.parent&&window.parent.window){var t=window.parent.window;if(t&&t.Xrm&&t.Xrm.Utility&&t.Xrm.Utility.getGlobalContext)return t.Xrm.Utility.getGlobalContext().getClientUrl()}}catch(t){}return}()))return t;if(void 0!==(t=function(){try{if(Xrm&&Xrm.Page&&Xrm.Page.context)return Xrm.Page.context.getClientUrl()}catch(t){}return}()))return t;throw new Error("Context is not available.")}()+"/api/data/v"+t+"/"}function tt(){return null===u.ApiUrl&&(u.ApiUrl=Y("9.2")),u.ApiUrl}function et(t){var e=t.match(/_guid$/);return e?"_"+t.substring(0,e.index)+"_value":t}function N(t){return D(t).map(function(t){return t.toString()})}function D(t){return E(t,et)}function U(s){var n,u;return s instanceof Date?s:"string"==typeof s&&Z("{",s)&&p(s,"}")?s.substring(1,s.length-1):s instanceof Array?(n=[],s.forEach(function(t,e){return n[e]=U(t)}),n):s instanceof Object?(u={},Object.keys(s).forEach(function(t){var e,n,r,i=t,t=U(s[t]),o=u;0<=i.indexOf(f)?0<=(e=i.indexOf(f))&&(n=i.substring(e+f.length),o[i.substring(0,e)+"@odata.bind"]="/"+n+"("+t+")"):0<=i.indexOf(d)?0<=(e=i.indexOf(d))&&(n=i.substring(e+d.length),r=tt(),o[i.substring(0,e)+"@odata.id"]=""+r+n+"("+t+")"):o[i]=t}),u):s}u.getDefaultUrl=Y,u.getApiUrl=tt}(XQW=XQW||{});
